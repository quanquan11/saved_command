{% extends "layout.html" %}

{% block title %}TSUMS Command Execution{% endblock %}

{% block content %}
<div class="command-input-container">
    <h2>Enter TSUMS Command</h2>
    <form id="command-form" method="POST">
        <input type="text" id="command-input" name="command" placeholder="Enter TSUMS command here" required>
        <button type="button" onclick="executeCommand()">Execute Command</button>
    </form>
</div>

<div id="executed-command-container" style="display: none;">
    <h2>Executed Command</h2>
    <p id="executed-command"></p>
    <button type="button" onclick="openSavePopup()">Save Command</button>
</div>

<!-- Bottom tabs for Terminal and Saved Commands -->
<div class="bottom-tab-container">
    <button class="bottom-tablinks" onclick="openBottomTab(event, 'Terminal')">Terminal</button>
    <button class="bottom-tablinks" onclick="openBottomTab(event, 'SavedCommands'); showAllCommands()">Saved Commands</button>
</div>

<!-- Terminal Section -->
<div id="Terminal" class="bottom-tabcontent" style="display: none;">
    <h3>Terminal Output</h3>
    <pre id="terminal-output"></pre>
</div>

<!-- Saved Commands Section -->
<div id="SavedCommands" class="bottom-tabcontent" style="display: none;">
    <h3>Saved Commands</h3>
    <input type="text" id="search-query" placeholder="Search saved commands..." onkeyup="searchCommands()">
    
    <!-- Saved commands table -->
    <table id="saved-commands-table" border="1" cellpadding="10" cellspacing="0">
        <thead>
            <tr>
                <th>Command Name</th>
                <th>Command Text</th>
                <th>Description</th>
                <th>Created At</th>
            </tr>
        </thead>
        <tbody id="saved-commands-body">
            <!-- Dynamic content will be inserted here -->
        </tbody>
    </table>
</div>

<script src="{{ url_for('static', filename='tsums.js') }}"></script>
{% endblock %}
